import { BowlingFrames } from '@/logic/qu2/constants';
import { main } from '@/logic/qu2/execute';

describe('ボウリングスコア計算', () => {

  const testCases = [
    {
      name: 'パーフェクトゲーム',
      frames: [
        [10, 0], [10, 0], [10, 0], [10, 0], [10, 0],
        [10, 0], [10, 0], [10, 0], [10, 0], [10, 10, 10]
      ],
      expected: [30, 60, 90, 120, 150, 180, 210, 240, 270, 300]
    },
    {
      name: 'ストライクやスペアが混在する複雑なケース',
      frames: [
        [7, 3], [9, 0], [10, 0], [8, 2], [10, 0],
        [10, 0], [9, 1], [10, 0], [10, 0], [10, 8, 1]
      ],
      expected: [19, 28, 48, 68, 97, 117, 137, 167, 195, 214]
    },
    {
      name: '全てのフレームが9点（オープンフレーム）',
      frames: [
        [9, 0], [9, 0], [9, 0], [9, 0], [9, 0],
        [9, 0], [9, 0], [9, 0], [9, 0], [9, 0]
      ],
      expected: [9, 18, 27, 36, 45, 54, 63, 72, 81, 90]
    },
    {
      name: '全ての投球がガター',
      frames: [
        [0, 0], [0, 0], [0, 0], [0, 0], [0, 0],
        [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]
      ],
      expected: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    },
    {
      name: '全てのフレームがスペア',
      frames: [
        [5, 5], [5, 5], [5, 5], [5, 5], [5, 5],
        [5, 5], [5, 5], [5, 5], [5, 5], [5, 5, 5]
      ],
      expected: [15, 30, 45, 60, 75, 90, 105, 120, 135, 150]
    },
    {
      name: '最終フレームでスペアを取り、ボーナス投球がある',
      frames: [
        [1, 1], [1, 1], [1, 1], [1, 1], [1, 1],
        [1, 1], [1, 1], [1, 1], [1, 1], [6, 4, 8]
      ],
      expected: [2, 4, 6, 8, 10, 12, 14, 16, 18, 36]
    }
  ];

  test.each(testCases)(
    '$name の場合、正しい累計スコアを計算すること',
    ({ frames, expected }) => {
      expect(main(frames as BowlingFrames)).toEqual(expected);
    }
  );
});